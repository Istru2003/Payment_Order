<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>MAIB landing page</title>
        <link rel="stylesheet" href="style_b1.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@300;400;700&display=swap" rel="stylesheet">
    </head>
    <body>
        <div class="container">
            <header>
                <nav class="navbar">
                    <img src="Data\image_1633004921_8nR1jw3Qfu_auto__0.png" width="200" height="85">
                    <button class="navbar-toggle-btn">
                        <span class="one"></span>
                        <span class="two"></span>
                        <span class="three"></span>
                    </button>

                    <ul class="navbar-nav">
                        <li><a href="#home">Home</a></li>
                        <li><a id="paymentOrderLink" href="payment_order.php">Payment Order</a></li>
                        <li><a id="translationsLink" href="translations.php">Transfers</a></li>
                        <li><a href="#">About</a></li>
                        <li><a href="#">Contact</a></li>
                        <li><a href="#blog">Blog</a></li>
                    </ul>

                    <a href="LogIn/dashboard.php"><span id="usernamePlaceholder"><?=$username?></span></a>
                    <span id="userMoney"></span>
                    <button class="btn-primary" onclick="redirectToLoginPage()"><span id="loginbtn"></span></button>

                </nav>
            </header>
            <main>
                <section class="home" id="home">
                    <div class="home-img-box">
                        <img src="Data/image-mockups.png" alt="Image for Easybank Banner" class="home-img" width="100%">
                    </div>
                    <div class="wrapper">
                        <h1 class="home-title">Next generation digital banking</h1>
                        <p class="home-text">
                            Take your financial life online. Your MAIB account
                            will be a one-stop-shop
                            for spending, saving, budgeting, investing, and much
                            more.
                        </p>
                        <button class="btn-primary">Request invite</button>
                    </div>
                </section>

                <section class="service">
                    <h2 class="section-title">Why choose MAIB?</h2>
                    <p class="section-text">
                        We leverage Open Banking to turn your bank account into
                        your financial hub. Control
                        your finances like never before.
                    </p>
                    <div class="service-card-group">
                        <div class="service-card">
                            <img src="Data/icon-online.svg" alt="Icon for Online Banking" class="card-icon">
                            <h3 class="card-title">Online Banking</h3>
                            <p class="card-text">
                                Our moddern web and mobile applications allow you to
                                keep track of your finances
                                wherever you are in the world.
                            </p>
                        </div>
                        <div class="service-card">
                            <img src="Data/icon-budgeting.svg" alt="Icon for Simple Budgeting" class="card-icon">
                            <h3 class="card-title">Simple Budgeting</h3>
                            <p class="card-text">
                                See exactly where your money goes each month. Receive 
                                notifications when you’re 
                                close to hitting your limits.
                            </p>
                        </div>
                        <div class="service-card">
                            <img src="Data/icon-onboarding.svg" alt="Icon for Fast Onboarding" class="card-icon">
                            <h3 class="card-title">Fast Onboarding</h3>
                            <p class="card-text">
                                We don’t do branches. Open your account in minutes online and 
                                start taking control 
                                of your finances right away.
                            </p>
                        </div>
                        <div class="service-card">
                            <img src="Data/icon-api.svg" alt="Icon for Open API" class="card-icon">
                            <h3 class="card-title">Open API</h3>
                            <p class="card-text">
                                Manage your savings, investments, pension, and much more from 
                                one account. Tracking 
                                your money has never been easier.
                            </p>
                        </div>
                    </div>
                </section>


                <section class="blog" id="blog">
                    <h2 class="section-tile">Latest Articles</h2>
                    <div class="article-card-group">
                        <article class="article-card">
                            <div class="card-head">
                                <img src="Data/image-currency.jpg" alt="Banner Image for Receive money in any currency with no fees" class="card-img">
                            </div>
                            <div class="card-body">
                                <p class="article-author">By <a href="#" id="">Claire Robinson</a></p>
                                <h3 class="card-title">
                                    <a href="#">Receive money in any currency with no fees</a>
                                </h3>
                                <p class="card-text">
                                    The world is getting smaller and we’re becoming more 
                                    mobile. So why should you be 
                                    forced to only receive money in a single …
                                </p>
                            </div>
                        </article>
                        <article class="article-card">
                            <div class="card-head">
                                <img src="Data/image-restaurant.jpg" alt="Banner Image for Treat yourself without worrying about money" class="card-img">
                            </div>
                            <div class="card-body">
                                <p class="article-author">By <a href="#" id="">Wilson Hutton</a></p>
                                <h3 class="card-title">
                                    <a href="#">Treat yourself without worrying about money</a>
                                </h3>
                                <p class="card-text">
                                    Our simple budgeting feature allows you to separate out your 
                                    spending and set 
                                    realistic limits each month. That means you …
                                </p>
                            </div>
                        </article>
                        <article class="article-card">
                            <div class="card-head">
                                <img src="Data/image-plane.jpg" alt="Banner Image for Take your Easybank card wherever you go" class="card-img">
                            </div>
                            <div class="card-body">
                                <p class="article-author">By <a href="#" id="">Wilson Hutton</a></p>
                                <h3 class="card-title">
                                    <a href="#">Take your MAIB card wherever you go</a>
                                </h3>
                                <p class="card-text">
                                    We want you to enjoy your travels. This is why we don’t charge 
                                    any fees on purchases 
                                    while you’re abroad. We’ll even show you …
                                </p>
                            </div>
                        </article>
                        <article class="article-card">
                            <div class="card-head">
                                <img src="Data/image-confetti.jpg" alt="Banner Image for Our invite-only Beta accounts are now live" class="card-img">
                            </div>
                            <div class="card-body">
                                <p class="article-author">By <a href="#" id="">Claire Robinson</a></p>
                                <h3 class="card-title">
                                    <a href="#">Our invite-only Beta accounts are now live!</a>
                                </h3>
                                <p class="card-text">
                                    After a lot of hard work by the whole team, we’re excited to 
                                    launch our closed beta. 
                                    It’s easy to request an invite through the site ...
                                </p>
                            </div>
                        </article>
                    </div>
                </section>
            </main>

            <footer>
                <div class="wrapper-flex">
                    <div>
                        <img src="Data\maib-orizontal-revers-logo-RGB-01.png" width="160" height="60">
                        <div class="social-link">
                            <a href="#">
                                <ion-icon name="logo-facebook"></ion-icon>
                            </a>
                            <a href="#">
                                <ion-icon name="logo-youtube"></ion-icon>
                            </a>
                            <a href="#">
                                <ion-icon name="logo-twitter"></ion-icon>
                            </a>
                            <a href="#">
                                <ion-icon name="logo-pinterest"></ion-icon>
                            </a>
                            <a href="#">
                                <ion-icon name="logo-instagram"></ion-icon>
                            </a>
                        </div>
                    </div>
                    <div class="footer-nav">
                        <ul>
                            <li><a href="#">About Us</a></li>
                            <li><a href="#">Contact</a></li>
                            <li><a href="#blog">Blog</a></li>
                        </ul>
                        <ul>
                            <li><a href="#">Careers</a></li>
                            <li><a href="#">Support</a></li>
                            <li><a href="#">Privacy Policy</a></li>
                        </ul>
                    </div>
                </div>
                <div class="wrapper">
                    <button class="btn-primary">Request Invite</button>

                    <p class="copyright">&copy; MAIB. All Rights Reserved</p>
                </div>
            </footer>
        </div>

        <script>
            const navbarToggleBtn = document.querySelector('.navbar-toggle-btn');
            const navbarNav = document.querySelector('.navbar-nav');

            const navbarToggleFunc = function(){
                console.log('Navbar toggle button clicked');
                navbarToggleBtn.classList.toggle('active');
                navbarNav.classList.toggle('active');
            }

            navbarToggleBtn.addEventListener('click', navbarToggleFunc);
        </script>

        <script>
            
            function resetUserData() {
                localStorage.removeItem('username');
                localStorage.removeItem('money');
                
                document.getElementById('usernamePlaceholder').innerText = '';
                document.getElementById('userMoney').innerText = ''; 
                document.getElementById('loginbtn').innerText = 'Log In';
            }
              
              const firstVisit = localStorage.getItem('firstVisit');
              
              if(!firstVisit) {
                localStorage.setItem('firstVisit', '1');
                
                resetUserData();
            } 
              
            if(!localStorage.getItem('username')) {
                resetUserData();  
            }

            function redirectToLoginPage() {
                const button = document.getElementById('loginbtn');
                const buttonText = button.innerText;
        
                if (buttonText === 'Log Out') {
                    localStorage.setItem('login', '0');
                    window.location.href = 'LogIn/logout.php';
                } else if (buttonText === 'Log In') {
                    window.location.href = 'LogIn/login.php';
                }
            }

            function checkFields() {
                var usernameValue = document.getElementById('usernamePlaceholder').innerText;
                var userMoneyValue = document.getElementById('userMoney').innerText;

                if (usernameValue.trim() !== '' && userMoneyValue.trim() !== '') {
                    document.getElementById('paymentOrderLink').removeAttribute('disabled');
                    document.getElementById('translationsLink').removeAttribute('disabled');
                } else {
                    document.getElementById('paymentOrderLink').setAttribute('disabled', 'disabled');
                    document.getElementById('translationsLink').setAttribute('disabled', 'disabled');
                }
            }

            function checkAndRedirect(event) {
                if (event.target.hasAttribute('disabled')) {
                    event.preventDefault();
                    alert('You need to register.');
                }
            }

            window.onload = checkFields;

            document.getElementById('paymentOrderLink').addEventListener('click', checkAndRedirect);
            document.getElementById('translationsLink').addEventListener('click', checkAndRedirect);
        
            const login = localStorage.getItem('login');
            const username = localStorage.getItem('username');
            const money = localStorage.getItem('money');

            if(login === '1'){
                document.getElementById('usernamePlaceholder').innerText = username;
                document.getElementById('userMoney').innerText = money + ' mdl';
                document.getElementById('loginbtn').innerText = 'Log Out';
            } else if (login === '0'){
                document.getElementById('usernamePlaceholder').innerText = '';
                document.getElementById('userMoney').innerText = '';
                document.getElementById('loginbtn').innerText = 'Log In';
            }

            const urlParams = new URLSearchParams(window.location.search);
            const newMoney = urlParams.get('money'); 

            if(newMoney) {
                document.getElementById('userMoney').textContent = newMoney;
            }

            window.addEventListener('unload', update_money(username, login));
            window.addEventListener('load', function() {
                update_money(username, login);
            });
            
            function update_money(username){
                const company = localStorage.getItem('company');
                fetch(`verify_money.php?company=${company}`)
                .then(response => response.text()) 
                .then(result => {
                    const [status, money] = result.split(';');
                
                    if (status === 'ok') {
                        if(login === '1'){
                            document.getElementById('usernamePlaceholder').innerText = username;
                            document.getElementById('userMoney').innerText = money + ' mdl';
                            document.getElementById('loginbtn').innerText = 'Log Out';
                        } else if (login === '0'){
                            document.getElementById('usernamePlaceholder').innerText = '';
                            document.getElementById('userMoney').innerText = '';
                            document.getElementById('loginbtn').innerText = 'Log In';
                        }
                    }
                })
                .catch(error => {
                    console.error('Error during payment:', error);
                });
            }

        </script>

        <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
        <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    </body>
</html>